
/* =========================================================
   Mōchirīī — Xianxia Re-ambience (Tailwind + Lottie)
   Keeps all content & assets. Rebuilds the atmosphere entirely.
   ========================================================= */

@import url("https://fonts.googleapis.com/css2?family=Zhi+Mang+Xing&family=Noto+Serif+SC:wght@400;500;600&display=swap");

:root {
  --font-display: "Zhi Mang Xing", ui-serif, serif;
  --font-body: "Noto Serif SC", ui-serif, serif;

  --ink0:#070812;
  --ink1:#0b0b1a;
  --ink2:#10102a;
  --orchid:#7c3aed;
  --ember:#f97316;
  --moon:#60a5fa;
  --grain:.055;
}

body{
  font-family: var(--font-body);
  background-color: black;
  color: white;
}

/* Keep existing theme attribute names, shift their meaning */
html[data-theme="lantern"]{
  --orchid:#7c3aed;
  --ember:#f97316;
  --moon:#60a5fa;
  --grain:.060;
}
html[data-theme="moon"]{
  --orchid:#a78bfa;
  --ember:#fb7185;
  --moon:#93c5fd;
  --grain:.045;
}

html, body{ height:100%; }
html{ background: var(--ink0); }

/* Background image stays the same asset, ambience changes via filters + overlays */
.bg-photo{
  position:fixed; inset:0; z-index:0; pointer-events:none;
  background: url("./assets/bg/wuxia-bg.png") center / cover no-repeat;
  filter: saturate(1.15) contrast(1.05) brightness(.72) hue-rotate(210deg);
  transform: translateZ(0);
}

/* Ink-wash aurora layers */
.bg-ink, .bg-ink-2, .bg-grain{
  position:fixed; inset:0; z-index:1; pointer-events:none;
}
.bg-ink{
  opacity:.55;
  background:
    radial-gradient(1100px 800px at 18% 20%, color-mix(in srgb, var(--orchid) 22%, transparent), transparent 60%),
    radial-gradient(900px 700px at 75% 28%, color-mix(in srgb, var(--moon) 18%, transparent), transparent 62%),
    radial-gradient(900px 700px at 55% 82%, color-mix(in srgb, var(--ember) 18%, transparent), transparent 65%),
    radial-gradient(700px 520px at 20% 78%, rgba(255,255,255,.05), transparent 62%);
  animation: drift 22s ease-in-out infinite alternate;
  filter: blur(.25px);
}
.bg-ink-2{
  opacity:.28;
  background:
    radial-gradient(900px 650px at 70% 60%, color-mix(in srgb, var(--orchid) 16%, transparent), transparent 66%),
    radial-gradient(780px 560px at 30% 70%, color-mix(in srgb, var(--moon) 16%, transparent), transparent 67%),
    radial-gradient(600px 420px at 55% 22%, color-mix(in srgb, var(--ember) 14%, transparent), transparent 68%);
  animation: drift2 30s ease-in-out infinite alternate;
  filter: blur(.45px);
}
.bg-grain{
  z-index:2;
  opacity: var(--grain);
  mix-blend-mode: overlay;
  background-image:
    repeating-linear-gradient(0deg, rgba(255,255,255,.08), rgba(255,255,255,.08) 1px, transparent 1px, transparent 2px),
    repeating-linear-gradient(90deg, rgba(0,0,0,.10), rgba(0,0,0,.10) 1px, transparent 1px, transparent 3px);
  transform: translateZ(0);
}

@keyframes drift{
  from{ transform: translate3d(-1.6%, -1.0%, 0) scale(1.03); }
  to{ transform: translate3d(1.6%, 1.2%, 0) scale(1.08); }
}
@keyframes drift2{
  from{ transform: translate3d(1.8%, -0.8%, 0) scale(1.02); }
  to{ transform: translate3d(-1.4%, 1.4%, 0) scale(1.07); }
}

/* Theme toggle knob motion */
#themeToggle span[aria-hidden="true"] span{
  transform: translateX(0);
}
html[data-theme="moon"] #themeToggle span[aria-hidden="true"] span{
  transform: translateX(1.5rem);
}

/* Optional: subtle shimmer overlay for hero card */
section#top article[aria-labelledby="guild-title"]::before{
  content:"";
  position:absolute;
  inset:-120px;
  background:
    radial-gradient(600px 300px at 20% 30%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(460px 320px at 80% 70%, color-mix(in srgb, var(--orchid) 18%, transparent), transparent 62%),
    linear-gradient(115deg, transparent 35%, rgba(255,255,255,.06) 50%, transparent 65%);
  opacity:.75;
  transform: rotate(-8deg);
  pointer-events:none;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .bg-ink, .bg-ink-2{ animation: none !important; }
  *{ scroll-behavior: auto !important; }
}
